#!/bin/bash

#Check and create the Regata OS Help configuration directory
if test ! -e "$HOME/.config/regataos-help" ; then
	mkdir -p "$HOME/.config/regataos-help"
fi

if test ! -e "/tmp/regataos-help" ; then
	mkdir -p "/tmp/regataos-help"
	ln -sf "$HOME/.config/regataos-help" "/tmp/regataos-help/config"
fi

# Check language
if test ! -e "/tmp/regataos-configs/config/plasma-localerc" ; then
	mkdir -p "/tmp/regataos-configs/config"
	ln -sf "$HOME/.config/plasma-localerc" "/tmp/regataos-configs/config/"
fi

# Check the theme that should be used
if test ! -e "/tmp/regataos-configs/config/kdeglobals" ; then
	mkdir -p "/tmp/regataos-configs/config"
	
	if test -e "$HOME/.config/kdedefaults/kdeglobals" ; then
		ln -sf "$HOME/.config/kdedefaults/kdeglobals" "/tmp/regataos-configs/config/"
	else
		ln -sf "$HOME/.config/kdeglobals" "/tmp/regataos-configs/config/"
	fi
fi

# Check internet connection
/opt/regataos-help/scripts/regataos-help-check-network.sh start

# Run app
regataoshelp /opt/regataos-help & sleep 1; /opt/regataos-help/scripts/regataos-help-notifications
